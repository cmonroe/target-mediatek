From 05799ad3dd2a75384dae94c087c931fbac45b71f Mon Sep 17 00:00:00 2001
From: Tim Hayes <tim.hayes@smartrg.com>
Date: Mon, 27 Sep 2021 15:14:12 -0700
Subject: [PATCH] OWRT-6281 added 2500BASEX return in validate

---
 drivers/net/ethernet/mediatek/mtk_eth_soc.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/mediatek/mtk_eth_soc.c b/drivers/net/ethernet/mediatek/mtk_eth_soc.c
index ba21214..e567df6 100644
--- a/drivers/net/ethernet/mediatek/mtk_eth_soc.c
+++ b/drivers/net/ethernet/mediatek/mtk_eth_soc.c
@@ -474,6 +474,8 @@ static void mtk_validate(struct phylink_config *config,
 					   phylink_config);
 	__ETHTOOL_DECLARE_LINK_MODE_MASK(mask) = { 0, };
 
+	if (state->interface == PHY_INTERFACE_MODE_2500BASEX) return; /* fixed-link with extphy hack */
+
 	if (state->interface != PHY_INTERFACE_MODE_NA &&
 	    state->interface != PHY_INTERFACE_MODE_MII &&
 	    state->interface != PHY_INTERFACE_MODE_GMII &&
-- 
2.20.1

